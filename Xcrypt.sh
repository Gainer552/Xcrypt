#!/bin/bash

cat << "EOF"
██████████████████████████████████████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████████████████████████████████████
█████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓███████████████████████████████████████████████████████████
██████████████▒░░░░░░░░░░░░░░░░░▓██████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██████████████
███████████████▓░░░░░░░░░░░░░░░░░▒████████████████████████████████████████████████████████
████████████████▓░░░░░░░░░░░░░░░░░▒██████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████████████████
██████████████████▒░░░░░░░░░░░░░░░░░▓█████████████████████████████████████████████████████
███████████████████▒░░░░░░░░░░░░░░░▒░▒████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓███████████████████
████████████████████▓░░░░░░░░░░░░▒░░░░▒▓██████████████████████████████████████████████████
██████████████████████▒░░░░░░░░░░░░░░░░░▓█████████████████████████████████████████████████
███████████████████████▒░░░░░░▒▒░░░░░░░░░▒█████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓███████████████████████
████████████████████████▓░░░░▒░░░░░░░░░░░░░▓█████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓█████████████████████████
██████████████████████████▒░░░░░░░░░░░░░░░░░▓█████████████████████████████████████████████
███████████████████████████▓░░░░░░░░░░░░░░░░▒▒█▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓███████████████████████████
████████████████████████████▓░░░░░░░░░░░░░▒▒░░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓█████████████████████████████
██████████████████████████████▒░░░░░░░░░░▒░░░░░░▓▓▓▓▓▓▓█▓▓▓███████████████████████████████
███████████████████████████████▒░░░░░░░░░░░░░░░░░▒████████████████████████████████████████
████████████████████████████████▓░░░░░░░░░░░░░░░░░░▓▓▓▓▓▓█████████████████████████████████
██████████████████████████████████▒░░░░░░░░░░░░░░░░░▒▓▓███████████████████████████████████
███████████████████████████████████▒░░░░░░░░░░░░░░░░░▒████████████████████████████████████
████████████████████████████████████▒░░░░░░░░░░░░░░░░░░▓██████████████████████████████████
█████████████████████████████████████▓▒░░░░░░░░░░░░░░░░░▓█████████████████████████████████
███████████████████████████████████████▒░░░░░░░░░░░░░░░░░▒████████████████████████████████
████████████████████████████████▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░▓██████████████████████████████
█████████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░▓█████████████████████████████
███████████████████████████████████████████▒░░░░░░░░░░░░░░░░░▒████████████████████████████
███████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░░▒▓██████████████████████████
█████████████████████████████████████████████▓▒░░░░░░░░░░░░░░░░░▓█████████████████████████
█████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██████▒░░░░░░░░░░░░░░░░░▒████████████████████████
████████████████████████████████████████████████▓░░░░░░░░░░░░░░░░░▒▓██████████████████████
█████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████████████▒░░░░░░░░░░░░░░░░░▓█████████████████████
███████████████████████████████████████████████████▒░░░░░░░░░░░░░░░░▒▒████████████████████
████████████████████████████████████████████████████▓░░░░░░░░░░░░░░░░░░▓██████████████████
█████████████████████████████████████████████████████▓▒░░░░░░░░░░░░░░░░▒▓█████████████████
███████████████████████████████████████████████████████▒░░░░░░░░░░░░░░░░░▒████████████████
████████████████████████████████████████████████████████▓░░░░░░░░░░░░░░░░░░▓██████████████
██████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██████████████████████████▓░░░░░░░░░░░░░░░░▒░▒█████████████
███████████████████████████████████████████████████████████▒░░░░░░░░░░░░░░░░░▒████████████
████████████████████████████████████████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓███████████
██████████████████████████████████████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████████████████████████████████████
EOF
echo

# Description
echo "Xcrypt is a simple and secure bash script designed to provide AES-256 bit encryption for raw partitions on Arch Linux. 
It ensures your data is fully protected with byte-by-byte encryption, securing the entire device at the block level. 
With a straightforward passphrase-based unlocking process, Xcrypt makes it easy to encrypt, mount, and safely manage encrypted 
partitions, giving you peace of mind that your sensitive data is always protected. Press CTRL + C to exit."
echo
#sleep 15s

echo "Warning: Xcrypt is a powerful tool that directly encrypts raw partitions on your system. 
By using this program, you acknowledge that any data on the encrypted partition will be erased during the encryption process. 
The developer is not responsible for any data loss, system failures, or other unintended consequences that may occur while 
using this tool. Please ensure that you have a complete backup of any important data before proceeding. 
Use Xcrypt at your own risk, and ensure you fully understand the encryption process before applying it to any device."
echo
#sleep 15s

# Shows all available partitions
echo "Will display all partitions visible on system in 5 seconds."
echo
#sleep 5s
lsblk
echo
#sleep 15s

while true; do
# Options menu.
		echo "1) Mount a partition."
		echo "2) Encrypt partition."
		echo "3) Unmount partition."
		echo
		read -p "Please select an option to begin: " usr_choice
		echo

# Operations
	case $usr_choice in
		1)
		read -p "Which device would you like to mount and where? " device location
			sudo mount $device $location && echo "Device has been mounted!"
		echo
		if [[ ! -b "$device" ]]; then echo "Device not found. Please try again."
		fi
		if [[ ! -d "$location" ]]; then echo "Invalid mount point. Please try again."
		fi;; 
		2) 
		read -p "Would you like to encrypt this device with AES-256 bit encryption and add a password? (y/n): " answer
			if [[ "$answer" == "y" || "$answer" == "Y" ]]; then
				echo
			echo "Encryption process started!"
			echo
			read -p "Enter the name of the device you'd like to encrypt: " device
			echo
			if sudo cryptsetup isLuks "$device"; then
			echo
			echo "Error: Device is already encrypted"
			echo
			fi 
			read -sp "Enter a password (include a minimum 16 characters, uppercase letters, lowercase letters, symbols, 
			and numbers: " passwd
			echo
			echo "Device selected, password set!"
			echo
			    echo -n "$passwd" | sudo cryptsetup luksFormat --cipher aes-xts-plain64 --key-size 256 "$device"
				if [[ $? -ne 0 ]]; then
					echo
				echo "Device has been encrypted! Enjoy NSA grade security! :)"
				echo
			else
				echo "Encryption failed! :("
				echo
				fi
		else
			echo "Encryption aborted."
		fi;;
		3) echo "Unmounting device... "
			echo
				for ((i=15; i>0; i--)); do
				echo "$i"
				sleep 1
			done
			echo
			sudo umount $device
			echo
			echo "Device has been unmounted!"
			echo;;
	esac
done